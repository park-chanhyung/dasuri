<!DOCTYPE html>
<!--<html lang="en">-->
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:th="http://thymeleaf.org">
<!--<html xmlns:th="http://thymeleaf.org">-->
<head>
    <meta charset="UTF-8">
    <script src="//t1.daumcdn.net/mapjsapi/bundle/postcode/prod/postcode.v2.js"></script>
    <link rel="stylesheet" type="text/css" th:href="@{/css/sign_up.css}">
    <script th:src="@{/js/jquery.js}"></script>
    <script th:inline="javascript" src="/js/sign_up.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <title>일반회원 가입</title>
</head>
<body>
<header style="font-size: 50px;">
    <div th:include="/list/layout/nav"></div>
</header>
<div class="login-wrap">
    <div class="login-html">
        <input id="tab-2" type="radio" name="tab" class="sign-up" checked><label for="tab-2" class="tab">회원가입</label>
        <div class="login-form">
            <form th:action="@{/user_signup}" th:object="${userDTO}" method="post">
                <div class="sign-up-htm">
                    <div class="group">
                        <label for="userId" class="label">아이디</label>
                        <input id="userId" name="userId" type="text" class="input" th:field="*{userId}"/>
                            <p id="duplicateMessage" th:text="${errorMessage}"></p> <!-- 에러 메시지 출력 -->
                        <div th:if="${#fields.hasErrors('userId')}" class="group">
                            <p id="error-Message" th:each="err : ${#fields.errors('userId')}" th:text="${err}"></p>
                        </div>
                    </div>
                    <div class="group">
                        <label for="userName" class="label">이름</label>
                        <input id="userName" name="userName" type="text" class="input" th:field="*{userName}">
                        <div th:if="${#fields.hasErrors('userName')}" class="group">
                            <p id="error-Message" th:each="err : ${#fields.errors('userName')}" th:text="${err}"></p>
                        </div>
                    </div>
                    <div class="group">
                        <label for="userNickname" class="label">닉네임</label>
                        <input id="userNickname" name="userNickname" type="text" class="input" th:field="*{userNickname}">
                        <div th:if="${#fields.hasErrors('userNickname')}" class="group">
                            <p id="error-Message" th:each="err : ${#fields.errors('userNickname')}" th:text="${err}"></p>
                        </div>
                    </div>
                    <div class="group">
                        <label for="userPwd" class="label">비밀번호</label>
                        <input id="userPwd" name="userPwd" type="password" class="input" data-type="password" th:field="*{userPwd}">
                        <div th:if="${#fields.hasErrors('userPwd')}" class="group">
                            <p id="error-Message" th:each="err : ${#fields.errors('userPwd')}" th:text="${err}"></p>
                        </div>
                    </div>
                    <div class="group">
                        <label for="userPwdConfirm" class="label">비밀번호 확인</label>
                        <input id="userPwdConfirm" name="userPwdConfirm" type="password" class="input" data-type="password">
                        <p id="passwordMatchMessage"></p> <!-- 비밀번호 일치 여부 메시지 -->
                    </div>
                    <div class="group">
                        <label for="userPhone" class="label">휴대폰 번호</label>
                        <input id="userPhone" name="userPhone" type="text" class="input" th:field="*{userPhone}">
                        <div th:if="${#fields.hasErrors('userPhone')}" class="group">
                            <p id="error-Message" th:each="err : ${#fields.errors('userPhone')}" th:text="${err}"></p>
                        </div>
                        <button type="button" class="button" onclick="verifyPhoneNumber()">인증하기</button>
                    </div>
                    <div class="group">
                        <label for="userAddr" class="label">주소</label>
<!--                        <input class="input" type="text" id="sample6_postcode" name="userPostcode" placeholder="우편번호" th:field="*{userPostcode}">-->
                        <input class="input" type="text" id="sample6_postcode" name="userPostcode" placeholder="우편번호">
                        <input type="button" class="button" onclick="sample6_execDaumPostcode()" value="우편번호 찾기"><br>
<!--                        <input class="input" type="text" id="sample6_address" name="userAddress" placeholder="주소" th:field="*{userAddress}"><br>-->
                        <input class="input" type="text" id="sample6_address" name="userAddress" placeholder="주소"><br>
<!--                        <input class="input" type="text" id="sample6_detailAddress" name="userDetailaddress" placeholder="상세주소" th:field="*{userDetailaddress}">-->
                        <input class="input" type="text" id="sample6_detailAddress" name="userDetailaddress" placeholder="상세주소">
<!--                        <input class="input" type="text" id="sample6_extraAddress" name="userExtraaddress" placeholder="참고항목" th:field="*{userExtraaddress}">-->
                        <input class="input" type="text" id="sample6_extraAddress" name="userExtraaddress" placeholder="참고항목">
                    </div>
                    <div class="group">
                        <input id="teenager" type="checkbox" class="check" checked>
                        <label for="teenager">만 14세 이상입니다.</label><br>
                        <input id="agreePrivacy" type="checkbox" class="check" checked>
                        <label for="agreePrivacy">개인 정보 제공 활용 동의</label><br>
                    </div>

                    <div class="group">
                        <input type="submit" class="button" value="회원 가입">
                    </div>
                    <div class="hr"></div>
                    <div class="foot-lnk">
                        <a href="@{/login}">이미 아이디가 있으신가요?</a>
                    </div>
                </div>
            </form>
        </div>
    </div>
</div>
<footer>
    <div th:include="/list/layout/footer"></div>
</footer>

<script th:inline="javascript">
    // $(document).ready(function() {
    //     $('#userId').on('input', function() {
    //         var userId = $(this).val();
    //         $.ajax({
    //             type: 'POST',
    //             url: '/check_duplicate',
    //             data: {'userId': userId},
    //             success: function(response) {
    //
    //                 if (response.duplicate) {
    //                     // 빨간색 텍스트 스타일
    //                     $('#duplicateMessage').text('이미 사용 중인 아이디입니다.').css({
    //                         'color': '#ff0909',
    //                         'font-weight': 'bold',
    //                         'font-size': '0.8em',
    //                     });
    //                 } else {
    //                     // 녹색 텍스트 스타일 #7CFC00
    //                     $('#duplicateMessage').text('사용할 수 있는 아이디입니다.').css({
    //                         'color': '#14da3b',
    //                         'font-size': '0.8em'
    //                     });
    //                 }
    //             },
    //             error: function() {
    //                 console.error('중복 확인 요청 실패');
    //             }
    //         });
    //     });
    // });
</script>
</body>
</html>
